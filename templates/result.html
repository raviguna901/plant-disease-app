<!DOCTYPE html>
<html lang="en">
<head>

<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">

<title>Detection Result</title>

<!-- Google Font -->
<link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;600;800&display=swap" rel="stylesheet">

<!-- Font Awesome -->
<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.5.0/css/all.min.css">

<style>

body{
margin:0;
font-family:Inter;
background:#0b1d15;
color:white;
transition:.3s;
}

/* DARK MODE */

body.dark{
background:#07130e;
}

#themeToggle{
position:fixed;
top:20px;
right:20px;
border:none;
background:#00ff99;
padding:12px 15px;
border-radius:50%;
cursor:pointer;
font-size:18px;
box-shadow:0 0 10px #00ff99;
}

/* WRAPPER */

.result-wrapper{
min-height:100vh;
display:flex;
justify-content:center;
align-items:center;
padding:20px;
}

/* CARD */

.card{
background:rgba(255,255,255,0.08);
backdrop-filter:blur(14px);
padding:50px;
border-radius:25px;
width:100%;
max-width:780px;
text-align:center;
animation:fadeUp .8s ease;
box-shadow:0 0 40px rgba(0,255,150,.15);
}

@keyframes fadeUp{
from{opacity:0;transform:translateY(40px);}
}

/* IMAGE */

.card img{
max-width:320px;
border-radius:18px;
box-shadow:0 0 25px rgba(0,255,150,0.4);
}

/* TITLE */

h1{
font-size:34px;
margin:25px 0 10px;
}

/* CONFIDENCE BAR */

.progress{
height:16px;
background:#222;
border-radius:20px;
margin:20px 0;
overflow:hidden;
}

.bar{
height:100%;
width:{{ confidence }}%;
background:linear-gradient(90deg,#00ff99,#ffd600);
animation:grow 1s ease;
}

@keyframes grow{
from{width:0;}
}

/* TEXT */

.desc{
opacity:.8;
margin-top:15px;
line-height:1.6;
}

/* BUTTONS */

.buttons{
margin-top:30px;
display:flex;
justify-content:center;
gap:20px;
flex-wrap:wrap;
}

.btn{
padding:14px 30px;
border-radius:10px;
text-decoration:none;
font-weight:600;
}

.green{
background:#00ff99;
color:black;
}

.yellow{
background:#ffd600;
color:black;
}

/* ICON */

#diseaseIcon{
color:#00ff99;
margin-right:10px;
font-size:32px;
}

/* MOBILE */

@media(max-width:600px){
.card{padding:30px;}
h1{font-size:26px;}
.card img{max-width:220px;}
}

</style>
</head>

<body>

<button id="themeToggle">üåô</button>

<div class="result-wrapper">

<div class="card">

<img src="{{ url_for('static', filename='uploads/' + image) }}">

<h1>
<i id="diseaseIcon" class="fa-solid fa-leaf"></i>
{{ disease }}
</h1>

<p>Confidence: {{ confidence }}%</p>

<div class="progress">
<div class="bar"></div>
</div>

<p class="desc">{{ description }}</p>

<p><b>Remedy:</b> {{ remedy }}</p>

<div class="buttons">

<a href="/" class="btn green">Analyze Another</a>

<a href="/download_report?disease={{ disease }}&confidence={{ confidence }}&image={{ image }}&image={{ image }}" class="btn yellow">Download PDF
</a>

</div>

</div>
</div>

<script>

/* ICON LOGIC */

const disease="{{ disease }}".toLowerCase();
const icon=document.getElementById("diseaseIcon");

if(disease.includes("healthy")){
icon.className="fa-solid fa-seedling";
}
else if(disease.includes("rot")){
icon.className="fa-solid fa-skull-crossbones";
}
else if(disease.includes("rust")){
icon.className="fa-solid fa-bug";
}
else if(disease.includes("blight")){
icon.className="fa-solid fa-virus";
}
else{
icon.className="fa-solid fa-leaf";
}

/* DARK MODE */

const toggle=document.getElementById("themeToggle");

toggle.onclick=()=>{
document.body.classList.toggle("dark");

if(document.body.classList.contains("dark")){
toggle.innerHTML="‚òÄÔ∏è";
localStorage.setItem("theme","dark");
}else{
toggle.innerHTML="üåô";
localStorage.setItem("theme","light");
}
};

if(localStorage.getItem("theme")==="dark"){
document.body.classList.add("dark");
toggle.innerHTML="‚òÄÔ∏è";
}

</script>

</body>
</html>